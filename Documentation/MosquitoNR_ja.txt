
                              MosquitoNR ver 0.10


【説明】

    モスキートノイズの低減を目的としたノイズ除去フィルタです。なお、このプラグイ
  ンはAviUtlプラグインである「スムージングフィルタ」と「低周波成分保護フィルタ」
  の処理をまとめ、AviSynthに移植したものです。

    このフィルタは次のような処理を行います:

  1. 画像の低周波成分を取得する。
  2. 画像にスムージングを適用する。これによりノイズが低減されるが、同時に輪郭を
     変形させてしまうなどの副作用も生じる。
  3. 1.で取得した低周波成分を復元し、副作用を最小限に抑える。

    このフィルタは輝度のみを処理します。色差も処理したいという場合は次のようなス
  クリプトを書くことで対応できますが、目立った変化は無いかもしれません。

  |  MosquitoNR()
  |  u = UtoY().MosquitoNR()  # AviSynth 2.6 では UtoY8() の方が僅かに高速
  |  v = VtoY().MosquitoNR()
  |  YtoUV(u, v, last)


【設定項目】

  Syntax: MosquitoNR([clip,] int strength, int restore, int radius, int threads)

  ・strength (範囲: 0〜32、デフォルト: 16)
      スムージングの強度、すなわちノイズ除去の強さを設定します。AviUtl版とは同じ
    数値でも効果が異なるようです（内部ではAviUtlとほぼ同じ12ビット精度で扱ってい
    るのですが…）。なお、数値を大きくすると副作用も大きくなりますので、あまり大
    きくし過ぎないようにしてください。

  ・restore (範囲: 0〜128、デフォルト: 128)
      スムージング前の低周波成分をどれだけ復元するかを設定します。0に設定すると、
    復元は行われずスムージングのみの処理となります。128に設定すると、スムージン
    グ後の低周波成分はスムージング前のものと完全に置き換えられ、若干高速に動作し
    ます。特に理由が無ければデフォルトのままで良いと思います。

  ・radius (範囲: 1〜2、デフォルト: 2)
      スムージング処理におけるブラーの半径を設定します。1の方が高速ですが、場合
    によって不十分な効果しか得られないことがあります。

  ・threads (範囲: 0〜32、デフォルト: 0)
      処理を行う際に使用するスレッドの数を設定します。デフォルトでは論理プロセッ
    サ数を自動的に検出し、それに等しい値に設定されます。このフィルタは頻繁にメモ
    リアクセスを行うため、スレッド効率があまり良くありません。ボトルネックになら
    ない程度にこの値を低く設定すると、全体の処理速度が改善する場合があります。


【動作環境】

  ・AviSynth 2.5.8 以降
  ・SSE2命令が使えるCPU
  ・対応している色空間: YUY2, YV12, YV16, YV24, YV411, Y8
  ・プログレッシブ映像のみ対応（インターレース映像は不可）


【謝辞】

    「スムージングフィルタ」および「低周波成分保護フィルタ」の作者さんと、これら
  のフィルタの組み合わせを提案してくださったPOP@4bitさんの三氏に深く感謝致します。

  がらくたハウスのがらくた置き場:  http://www.geocities.jp/flash3kyuu/
  スキマ産業:                      http://nilposoft.info/aviutl-plugin/
  POP@4bit:                        http://pop.4-bit.jp/?p=3362


【更新履歴】

  ver 0.10 (13/03/14)
    ・AviSynth MT上で使用するとクラッシュする不具合を修正
    ・YV16、YV24、Y411、Y8に対応
    ・若干の高速化
    ・英語のドキュメントを追加

  ver.120210 (12/02/10)
    ・初版


e-mail:  oinari17@gmail.com
twitter: @b_inary

